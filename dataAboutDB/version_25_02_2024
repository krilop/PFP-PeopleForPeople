
create table "authorization"
(
    id           bigint      not null
        constraint authorization_pkey1
            primary key,
    email        text        not null,
    login        varchar(30) not null,
    hash_of_pass text        not null
);

alter table "authorization"
    owner to postgres;

create table contact
(
    id           bigint generated always as identity
        constraint contacts_pkey
            primary key,
    user_id      bigint               not null
        constraint fk_user_id
            references "authorization",
    info         text                 not null,
    contact_type numeric(2) default 1 not null
);

alter table contact
    owner to postgres;


create table event
(
    id             bigint generated always as identity
        constraint events_pkey
            primary key,
    type_id        bigint          not null
        constraint fk_type_id
            references interest_type,
    title          text            not null,
    discription    text,
    cost           money default 0 not null,
    payment_method text            not null
);

alter table event
    owner to postgres;


create table event_date
(
    id         bigint generated always as identity
        constraint "eventsDates_pkey"
            primary key,
    event_id   bigint    not null
        constraint fk_events_date
            references event,
    date_start timestamp not null,
    date_end   timestamp not null
);

alter table event_date
    owner to postgres;


create table event_geolocation
(
    id             bigint generated always as identity
        constraint events_geolocation_pkey
            primary key,
    event_id       bigint not null
        constraint fk_event_id
            references event,
    geolocation_id bigint not null
        constraint fk_geolocation
            references geolocation
);

alter table event_geolocation
    owner to postgres;


create table geolocation
(
    id      bigint generated always as identity
        constraint geolocations_pkey
            primary key,
    title   text not null,
    address json not null
);

alter table geolocation
    owner to postgres;

    
    create table interest_type
    (
        id            smallint generated always as identity
            constraint "interestType_pkey"
                primary key,
        title_of_type text not null
    );

    alter table interest_type
        owner to postgres;


create table interest_type_user
(
    id          bigint generated always as identity
        constraint "interestType_users_pkey"
            primary key,
    user_id     bigint   not null
        constraint fk_user_id
            references "authorization",
    interest_id smallint not null
        constraint fk_interest_id
            references interest_type
);

alter table interest_type_user
    owner to postgres;


create table list_of_customers
(
    id       bigint generated always as identity
        constraint "listOfCustomers_pkey"
            primary key,
    user_id  bigint not null
        constraint fk_user_id
            references "authorization",
    event_id bigint not null
        constraint fk_event_id
            references event
);

alter table list_of_customers
    owner to postgres;


create table relation
(
    id             bigint generated always as identity
        constraint relations_pkey
            primary key,
    user_id        bigint   not null
        constraint fk_user_id
            references "authorization",
    friend_id      bigint   not null
        constraint fk_friend_id
            references "authorization",
    relation_title smallint not null
        constraint relation_relation_type_key
            unique
        constraint fk_relations_type
            references relation_type
);

alter table relation
    owner to postgres;


create table relation_type
(
    id             smallint generated always as identity
        constraint "relationType_pkey"
            primary key,
    relation_title text not null
);

alter table relation_type
    owner to postgres;


create table user_data
(
    name          text       not null,
    last_name     text       not null,
    description   text,
    date_of_birth timestamp  not null,
    geolocation   text       not null,
    media         json,
    gender        numeric(1) not null,
    user_id       bigint     not null
        unique
        references "authorization"
);

alter table user_data
    owner to postgres;

